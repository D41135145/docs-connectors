= SAP Connector Studio Configuration - Mule 4
:page-aliases: connectors::sap/sap-connector-studio.adoc

Anypoint Studio (Studio) editors help you design and update your Mule applications, properties, and configuration files.

To add and configure a connector in Studio:

. <<prerequisites,Download the SAP libraries>>
. <<create-mule-project,Create a Mule project>>.
. <<add-connector-to-project,Add the connector to your Mule project>>.
. <<configure-input-source,Configure a source for the connector's flow>>.
. <<install-and-configure-sap-libraries,Install and configure the SAP libraries>>
. <<add-connector-operation,Add a connector operation to the flow>>.
. <<configure-global-element,Configure a global element for the connector>>.
. <<configure-other-fields,Configure the other connector fields>>.

When you run the connector, you can view the app log to check for problems, as described in <<view-app-log,View the App Log>>.

If you are new to configuring connectors in Studio, see xref:connectors::introduction/intro-config-use-studio.adoc[Use Studio to Configure a Connector]. If, after reading this topic, you need additional information about the connector fields, see the SAP Connector Reference.

[[prerequisites]]
== Prerequisites

To use SAP libraries in your Mule project, you must first download the libraries to your computer. You can use the three libraries in Anypoint Studio directly, without conversion. You must have an SAP ID to download the libraries.

The file types for each library depend on your operating system:

[%header%autowidth.spread]
|===
| OS | File Types
| Windows a| * sapidoc3.jar
* sapjco3.jar
* sapjco3.dll

| Mac OS a| * sapidoc3.jar
* sapjco3.jar
* libsapjco3.jnilib

| Linux a| * sapidoc3.jar
* sapjco3.jar
* libsapjco3.so
|===

[NOTE]
SAP Connector supports versions 3.0.x and 3.1.x of the SAP JCo libraries.

After you install and configure the libraries, you can customize the global element properties and test the connection.

[[create-mule-project]]
== Create a Mule Project

In Studio, create a new Mule project in which to add and configure the connector: 

. In Studio, select *File > New > Mule Project*.
. Enter a name for your Mule project and click *Finish*.

[[add-connector-to-project]]
== Add SAP Connector to Your Mule Project 

Add SAP Connector to your Mule project to automatically populate the XML code with the connector's namespace and schema location and to add the required dependencies to the project's `pom.xml` file:

. In the *Mule Palette* view, click *Search in Exchange*.
. In *Add Modules to Project*, type `sap` in the search field.
. In *Available modules*, select *SAP Connector - Mule 4*.
. Click *Add*.
. Click *Finish*.

Adding a connector to a Mule project in Studio does not make that connector available to other projects in your Studio workspace.

[[configure-input-source]]
== Configure a Source

A source initiates a flow when a specified condition is met.
You can configure one of these input sources to use with SAP Connector:

* *Document listener* +
Listens for a change to an IDoc. When an IDoc changes, your app executes.
* *Function listener* +
Listens for a change to a SAP function module. When the targeted function module changes, your app executes.
* *HTTP > Listener*, which initiates a flow each time it receives a request on the configured host and port
* `Scheduler`, which initiates a flow when a time-based condition is met

For example, to configure *Document listener*, follow these steps:

. In the *Mule Palette* view, select *Document listener*.
. Drag *Document listener* to the Studio canvas.
. On the *Document listener > General* tab, optionally change the value of the *Display Name* field.
. Specify the values for the following fields:
* *Gateway host* +
* *Gateway service* +
* *Program ID* +
* *Connection count* +
* *IDoc type filter regex* +
Specify the type of IDoc to filter by.
+
The following image shows an example of the General configuration values for the *Document listener* source operation:
+
image::sap-doc-listener-general-properties.png[General properties fields for a Document Listener source operation]
. In the Anypoint Studio menu, select *File > Save* to save your project. 

[[install-and-configure-sap-libraries]]
== Install and Configure the SAP Libraries 

After adding SAP Connector to your Mule project and adding a source, you must install and configure the SAP libraries:

. In the Studio canvas, select the source.
. Click the plus sign (*+*) on the right of the *Connector Configuration* field. +
This screen appears:
+
image::sap-connector-configuration-01.png[]

=== Install the IDOC Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap-connector-configuration-02-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap-connector-configuration-02-finish.png[]

=== Install the JCO Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap-connector-configuration-03-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap-connector-configuration-03-finish.png[]

=== Install the JCO Native Library

. Click *Add Dependency*.
. Click *Install*.
+
image::sap-connector-configuration-02.png[]
+
. In the *Install* menu, click *Browse* to locate the library file.
. Specify a unique group ID, artifact ID, and version.
+
image::sap-connector-configuration-04-in.png[]
+
. Click *Finish* or, if you want to cancel, click *Remove Dependency*.
+
image::sap-connector-configuration-04-finish.png[]

When you are finished installing the libraries, the configuration screen appears as follows with green check marks for each successfully installed library:

image::sap-connector-libraries-installed.png[]

[[add-connector-operation]]
== Add a Connector Operation to the Flow

When you add a connector operation to your flow, you immediately define a specific operation for that connector to perform.

To add an operation for SAP Connector, follow these steps:

. In the *Mule Palette* view, select *SAP Connector* and then select the desired operation.
. Drag the operation onto the Studio canvas and to the right of the input source.

[[configure-global-element]]
== Configure a Global Element for the Connector

When you configure a connector, itâ€™s best to configure a global element that all instances of that connector in the app can use. Configuring a global element requires you to provide the authentication credentials that the connector requires to access the target SAP system. SAP Connector supports certificate and simple connection provider connection authentication types.

To configure the global element for SAP Connector, follow these steps:

. Select the operation in the Studio canvas.
. In the configuration screen for the operation, click the plus sign (+) next to the *Connector configuration* field to access the global element configuration fields.
. On the *General* tab, in *Connection*, select the authentication type to use:
* <<certificate,*Certificate*>>
* <<simple-connection-provider,*Simple connection provider*>>
+
Your SAP administrator can supply the proper values for the connection configuration.
+
You can reference a configuration file that contains ANT-style property placeholders (recommended), or you can enter your authorization credentials in the global configuration properties. For information about the benefits of using property placeholders and how to configure them, see xref:connectors::introduction/intro-connector-configuration-overview.adoc[Anypoint Connector Configuration].
. On the *Advanced* tab, optionally specify reconnection information, including a reconnection strategy.
. Click *Test Connection* to confirm that Mule can connect with the specified server.
. Click *OK*.

[[certificate]]
=== Certificate

On the *General* tab of the *Global Element Properties* screen, enter the required values for defining an SAP connection using *Certificate* authentication:

[%header,cols="30s,70a"]
|===
|Field |Description
|Application Server Host | SAP endpoint
|X.509 Certificate | Username of an authorized SAP user
|SAP system number | System number used to connect to the SAP system
|SAP client ID| The SAP client ID (usually a number) used to connect to the SAP system
|===

[[simple-connection-provider]]
=== Simple Connection Provider

On the *General* tab of the *Global Element Properties* screen, enter the required values for defining an SAP connection using the *Simple connection provider* authentication type:

The minimum required attributes to define are:

[%header,cols="30s,70a"]
|===
|Field |Description
|Application Server Host | SAP endpoint
|Username | Username of an authorized SAP user
|Password | Password credential of an authorized SAP user
|SAP system number | System number used to connect to the SAP system
|SAP client ID| The SAP client ID (usually a number) used to connect to the SAP system
|===

== Next

After configuring this connector in Studio,
see the xref:sap-connector-config-topics.adoc[Additional Configuration Information] topic for more configuration information.

For ease of use, SAP Connector shows only the most common properties as connector parameters. To configure a property that is not listed in the *Properties* panel, see the xref:sap-connector-config-topics.adoc[Define Extended Properties] topic.

== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* xref:sap-connector-reference.adoc[SAP Connector Reference]
* https://help.mulesoft.com[MuleSoft Help Center]
